(function(e){function n(n){for(var r,c,u=n[0],i=n[1],s=n[2],l=0,f=[];l<u.length;l++)c=u[l],Object.prototype.hasOwnProperty.call(a,c)&&a[c]&&f.push(a[c][0]),a[c]=0;for(r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r]);d&&d(n);while(f.length)f.shift()();return o.push.apply(o,s||[]),t()}function t(){for(var e,n=0;n<o.length;n++){for(var t=o[n],r=!0,c=1;c<t.length;c++){var u=t[c];0!==a[u]&&(r=!1)}r&&(o.splice(n--,1),e=i(i.s=t[0]))}return e}var r={},c={app:0},a={app:0},o=[];function u(e){return i.p+"js/"+({}[e]||e)+"."+{"chunk-1d714e5b":"62d4687a","chunk-21bf94a0":"dd7de8b7","chunk-24107b9a":"f50d993c","chunk-e34613da":"fb0dada3","chunk-f01313a8":"021c96f7","chunk-fba14622":"84958c32","chunk-4b9f6e49":"11444f09","chunk-5b5b328e":"e09ff636","chunk-5da51db0":"7db4c8c4","chunk-69c5ce55":"19d26d6b","chunk-1deeca10":"54cf9bbf","chunk-71a70544":"bba15b47","chunk-59ce69da":"a78c0a6b","chunk-64995860":"5067bec6","chunk-4fc73ff4":"bda25f83","chunk-734a2e63":"8f49cf41","chunk-ce5415ac":"2c463ebc","chunk-df6c8fae":"72dc2722","chunk-14ecb09c":"63178550","chunk-56fc552d":"0f90f179","chunk-77f137cc":"3168ff02","chunk-9e2e1f4a":"02096b48","chunk-ee1ca550":"bef2bfb7"}[e]+".js"}function i(n){if(r[n])return r[n].exports;var t=r[n]={i:n,l:!1,exports:{}};return e[n].call(t.exports,t,t.exports,i),t.l=!0,t.exports}i.e=function(e){var n=[],t={"chunk-1d714e5b":1,"chunk-24107b9a":1,"chunk-f01313a8":1,"chunk-fba14622":1,"chunk-4b9f6e49":1,"chunk-5b5b328e":1,"chunk-5da51db0":1,"chunk-69c5ce55":1,"chunk-1deeca10":1,"chunk-71a70544":1,"chunk-59ce69da":1,"chunk-64995860":1,"chunk-4fc73ff4":1,"chunk-734a2e63":1,"chunk-ce5415ac":1,"chunk-df6c8fae":1,"chunk-14ecb09c":1,"chunk-56fc552d":1,"chunk-77f137cc":1,"chunk-9e2e1f4a":1,"chunk-ee1ca550":1};c[e]?n.push(c[e]):0!==c[e]&&t[e]&&n.push(c[e]=new Promise((function(n,t){for(var r="css/"+({}[e]||e)+"."+{"chunk-1d714e5b":"ca45fafe","chunk-21bf94a0":"31d6cfe0","chunk-24107b9a":"e3abd32b","chunk-e34613da":"31d6cfe0","chunk-f01313a8":"a48d2288","chunk-fba14622":"570d4b6c","chunk-4b9f6e49":"12393ac8","chunk-5b5b328e":"dc9a1296","chunk-5da51db0":"ac4ab6d3","chunk-69c5ce55":"d76b553c","chunk-1deeca10":"5df2bfd6","chunk-71a70544":"31e0cbff","chunk-59ce69da":"c9b5a3fe","chunk-64995860":"34efb8a6","chunk-4fc73ff4":"330fd6c4","chunk-734a2e63":"94cee40f","chunk-ce5415ac":"79a1767f","chunk-df6c8fae":"c1883e1b","chunk-14ecb09c":"b9c7024e","chunk-56fc552d":"47c8eca8","chunk-77f137cc":"d0261d2e","chunk-9e2e1f4a":"3345a088","chunk-ee1ca550":"f5d2bff6"}[e]+".css",a=i.p+r,o=document.getElementsByTagName("link"),u=0;u<o.length;u++){var s=o[u],l=s.getAttribute("data-href")||s.getAttribute("href");if("stylesheet"===s.rel&&(l===r||l===a))return n()}var f=document.getElementsByTagName("style");for(u=0;u<f.length;u++){s=f[u],l=s.getAttribute("data-href");if(l===r||l===a)return n()}var d=document.createElement("link");d.rel="stylesheet",d.type="text/css",d.onload=n,d.onerror=function(n){var r=n&&n.target&&n.target.src||a,o=new Error("Loading CSS chunk "+e+" failed.\n("+r+")");o.code="CSS_CHUNK_LOAD_FAILED",o.request=r,delete c[e],d.parentNode.removeChild(d),t(o)},d.href=a;var h=document.getElementsByTagName("head")[0];h.appendChild(d)})).then((function(){c[e]=0})));var r=a[e];if(0!==r)if(r)n.push(r[2]);else{var o=new Promise((function(n,t){r=a[e]=[n,t]}));n.push(r[2]=o);var s,l=document.createElement("script");l.charset="utf-8",l.timeout=120,i.nc&&l.setAttribute("nonce",i.nc),l.src=u(e);var f=new Error;s=function(n){l.onerror=l.onload=null,clearTimeout(d);var t=a[e];if(0!==t){if(t){var r=n&&("load"===n.type?"missing":n.type),c=n&&n.target&&n.target.src;f.message="Loading chunk "+e+" failed.\n("+r+": "+c+")",f.name="ChunkLoadError",f.type=r,f.request=c,t[1](f)}a[e]=void 0}};var d=setTimeout((function(){s({type:"timeout",target:l})}),12e4);l.onerror=l.onload=s,document.head.appendChild(l)}return Promise.all(n)},i.m=e,i.c=r,i.d=function(e,n,t){i.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:t})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,n){if(1&n&&(e=i(e)),8&n)return e;if(4&n&&"object"===typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(i.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var r in e)i.d(t,r,function(n){return e[n]}.bind(null,r));return t},i.n=function(e){var n=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(n,"a",n),n},i.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},i.p="/simple-twitter-vue/",i.oe=function(e){throw console.error(e),e};var s=window["webpackJsonp"]=window["webpackJsonp"]||[],l=s.push.bind(s);s.push=n,s=s.slice();for(var f=0;f<s.length;f++)n(s[f]);var d=l;o.push([0,"chunk-vendors"]),t()})({0:function(e,n,t){e.exports=t("56d7")},1602:function(e,n,t){"use strict";var r=t("c968");n["a"]={getCurrentUser:function(){return r["c"].get("/current_user")},getTopUsers:function(){return r["c"].get("/users/top")},follow:function(e){var n=e.id;return r["c"].post("/followships",{id:n})},unFollow:function(e){var n=e.userId;return r["c"].delete("/followships/".concat(n))},login:function(e){var n=e.email,t=e.password;return r["c"].post("/signin",{email:n,password:t})},saveAccount:function(e){var n=e.userId,t=e.formData;return r["c"].put("/users/".concat(n),t)},getOtherUser:function(e){var n=e.userId;return r["c"].get("/users/".concat(n))},editUserProfile:function(e){var n=e.userId,t=e.formData;return r["c"].put("/users/".concat(n,"/profile"),t)},getSingleUserTweets:function(e){var n=e.userId;return r["c"].get("/users/".concat(n,"/tweets"))},getSingleUserLikeTweets:function(e){var n=e.userId;return r["c"].get("/users/".concat(n,"/likes"))},getSingleUserReplies:function(e){var n=e.userId;return r["c"].get("/users/".concat(n,"/replied_tweets"))},getUserFollowings:function(e){var n=e.userId;return r["c"].get("/users/".concat(n,"/followings"))},getUserFollowers:function(e){var n=e.userId;return r["c"].get("/users/".concat(n,"/followers"))}}},"3b8e":function(e,n,t){},"56d7":function(e,n,t){"use strict";t.r(n);t("e260"),t("e6cf"),t("cca6"),t("a79d");var r=t("2b0e"),c=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},a=[],o=t("1da1"),u=t("5530"),i=(t("96cf"),t("b0c0"),t("2f62")),s=t("1602");r["a"].use(i["a"]);var l=new i["a"].Store({state:{currentUser:{id:-1,name:"",email:"",role:""},isAuthenticated:!1,chatRoomId:-1},mutations:{setCurrentUser:function(e,n){e.currentUser=Object(u["a"])(Object(u["a"])({},e.currentUser),n),e.isAuthenticated=!0},revokeAuthentication:function(e){e.currentUser={},e.isAuthenticated=!1,localStorage.removeItem("token")},followed:function(e){e.userIsFollowed=!e.userIsFollowed},setChatRoomId:function(e,n){e.chatRoomId=n}},actions:{fetchCurrentUser:function(e){return Object(o["a"])(regeneratorRuntime.mark((function n(){var t,r,c,a,o,u,i,l,f,d,h,p,m,b,k,g;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t=e.commit,n.prev=1,n.next=4,s["a"].getCurrentUser();case 4:return r=n.sent,c=r.data,a=c.id,o=c.name,u=c.email,i=c.avatar,l=c.role,f=c.introduction,d=c.account,h=c.cover,p=c.createdAt,m=c.updatedAt,b=c.Followers,k=c.Followings,g=c.Likes,t("setCurrentUser",{id:a,name:o,email:u,avatar:i,role:l,introduction:f,account:d,cover:h,createdAt:p,updatedAt:m,Followers:b,Followings:k,Likes:g}),n.abrupt("return",!0);case 11:return n.prev=11,n.t0=n["catch"](1),console.log("error",n.t0),console.error("無法取得當前使用者"),n.abrupt("return",!1);case 16:case"end":return n.stop()}}),n,null,[[1,11]])})))()}},modules:{}}),f=t("5132"),d=t.n(f),h=t("8e27"),p=t.n(h),m=localStorage.getItem("token");r["a"].use(new d.a({debug:!0,autoConnect:!1,connection:p()("https://super-simple-twitter.herokuapp.com",{auth:{token:m}}),vuex:{store:l,actionPrefix:"SOCKET_",mutationPrefix:"SOCKET_"}}));var b={},k=b,g=(t("5c0b"),t("2877")),v=Object(g["a"])(k,c,a,!1,null,null,null),w=v.exports,y=(t("d3b7"),t("3ca3"),t("ddb0"),t("caad"),t("2532"),t("8c4f")),P=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"container"},[t("form",{on:{submit:function(n){return n.stopPropagation(),n.preventDefault(),e.submit.apply(null,arguments)}}},[t("div",{staticClass:"logo"},[t("svg",{attrs:{width:"50",height:"50",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[t("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M30.7 23.47s-7.467 12.108-13.59 12.108c-10.707 0-.728-23.065 7.082-23.065 5.449 0 6.508 10.958 6.508 10.958z",fill:"#F60"}}),t("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M39.572 38.697a19.997 19.997 0 01-31.81-3.557c1.77 2.408 4.772 4.013 9.041 4.013 10.517 0 16.487-8.173 16.487-8.173s.516 6.46 6.27 7.717h.012zM42.722 15.745a19.98 19.98 0 01-.481 19.395 5.947 5.947 0 01-2.803-3.531l-2.282-6.837 5.566-9.027zM25.003 5.017a19.96 19.96 0 0113.537 5.28l-3.788 6.112c-1.37-3.566-4.156-7.136-9.575-7.136-11.099 0-19.325 12.116-19.325 19.712-.002.982.123 1.96.373 2.91a20 20 0 019.53-24.628A20.008 20.008 0 0125.002 5v.017z",fill:"#F60"}})])]),e._m(0),t("div",{staticClass:"form-label email-form-label"},[t("label",{staticClass:"label",attrs:{for:"email"}},[e._v("帳號")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.email,expression:"email"}],staticClass:"email-input",attrs:{id:"email",name:"email",type:"email",autocomplete:"username",required:"",autofocus:""},domProps:{value:e.email},on:{input:function(n){n.target.composing||(e.email=n.target.value)}}})]),t("div",{staticClass:"form-label password-form-label"},[t("label",{staticClass:"label",attrs:{for:"password"}},[e._v("密碼")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],staticClass:"password-input",attrs:{id:"password",name:"password",type:"password",autocomplete:"current-password",required:""},domProps:{value:e.password},on:{input:function(n){n.target.composing||(e.password=n.target.value)}}})]),t("button",{staticClass:"main-btn login-btn",class:{"disabled-btn":e.isProcessing},attrs:{type:"submit",disabled:e.isProcessing}},[e._v(" 登入 ")]),t("div",{staticClass:"admin-login-btn"},[t("router-link",{attrs:{to:"/regist"}},[e._v(" 註冊 Alphitter ")]),t("div",{staticClass:"dot"}),t("router-link",{attrs:{to:"/admin"}},[e._v(" 後台登入 ")])],1)])])},C=[function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"title"},[t("h1",[e._v("登入 Alphitter")])])}],_=t("c968"),x={name:"UserLogin",data:function(){return{email:"",password:"",isProcessing:!1}},methods:{submit:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function n(){var t,r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(n.prev=0,e.email&&e.password){n.next=4;break}return _["a"].fire({icon:"warning",title:"請填入 email 和 password"}),n.abrupt("return");case 4:return e.isProcessing=!0,n.next=7,s["a"].login({email:e.email,password:e.password});case 7:if(t=n.sent,r=t.data,"success"===r.status){n.next=11;break}throw new Error(r.message);case 11:localStorage.setItem("token",r.token),e.$store.commit("setCurrentUser",r.user),e.$store.commit("setChatRoomId",-1),e.$router.push("/main"),n.next=23;break;case 17:n.prev=17,n.t0=n["catch"](0),console.log(n.t0),e.isProcessing=!1,e.password="",_["a"].fire({icon:"warning",title:"登入失敗，請稍後再試"});case 23:case"end":return n.stop()}}),n,null,[[0,17]])})))()}}},O=x,U=(t("841f"),Object(g["a"])(O,P,C,!1,null,"45e2c471",null)),I=U.exports;r["a"].use(y["a"]);var A=[{path:"/",name:"root",redirect:"/login"},{path:"/login",name:"user-login",component:I},{path:"/regist",name:"register",component:function(){return t.e("chunk-4b9f6e49").then(t.bind(null,"73cf"))}},{path:"/setting",name:"setting",component:function(){return Promise.all([t.e("chunk-69c5ce55"),t.e("chunk-4fc73ff4")]).then(t.bind(null,"ce99"))}},{path:"/main",name:"user-main",component:function(){return Promise.all([t.e("chunk-69c5ce55"),t.e("chunk-21bf94a0"),t.e("chunk-24107b9a"),t.e("chunk-71a70544")]).then(t.bind(null,"10ea"))}},{path:"/reply_list/:id",name:"reply-list",component:function(){return Promise.all([t.e("chunk-69c5ce55"),t.e("chunk-21bf94a0"),t.e("chunk-1deeca10")]).then(t.bind(null,"56c3"))}},{path:"/user/self",name:"user-self",component:function(){return Promise.all([t.e("chunk-69c5ce55"),t.e("chunk-df6c8fae"),t.e("chunk-56fc552d")]).then(t.bind(null,"1511"))},redirect:"/user/self/tweet",children:[{path:"tweet",name:"user-self-tweet",component:function(){return Promise.all([t.e("chunk-21bf94a0"),t.e("chunk-24107b9a"),t.e("chunk-e34613da")]).then(t.bind(null,"8f8e"))}},{path:"reply",name:"user-self-reply",component:function(){return Promise.all([t.e("chunk-21bf94a0"),t.e("chunk-fba14622")]).then(t.bind(null,"942f"))}},{path:"like",name:"user-self-like",component:function(){return Promise.all([t.e("chunk-21bf94a0"),t.e("chunk-f01313a8")]).then(t.bind(null,"43a0"))}}]},{path:"/user/self/follow/:id",name:"user-self-follow",component:function(){return Promise.all([t.e("chunk-69c5ce55"),t.e("chunk-734a2e63")]).then(t.bind(null,"d7ac"))},redirect:"/user/self/follow/follower",children:[{path:"follower",name:"user-self-follow-follower",component:function(){return t.e("chunk-ee1ca550").then(t.bind(null,"0b9f"))}},{path:"following",name:"user-self-follow-following",component:function(){return t.e("chunk-9e2e1f4a").then(t.bind(null,"e6cd"))}}]},{path:"/user/other/:id",name:"user-other",component:function(){return Promise.all([t.e("chunk-69c5ce55"),t.e("chunk-df6c8fae"),t.e("chunk-14ecb09c")]).then(t.bind(null,"2960"))},redirect:"/user/other/:id/tweet",children:[{path:"tweet",name:"user-other-tweet",component:function(){return Promise.all([t.e("chunk-21bf94a0"),t.e("chunk-24107b9a"),t.e("chunk-e34613da")]).then(t.bind(null,"8f8e"))}},{path:"reply",name:"user-other-reply",component:function(){return Promise.all([t.e("chunk-21bf94a0"),t.e("chunk-fba14622")]).then(t.bind(null,"942f"))}},{path:"like",name:"user-other-like",component:function(){return Promise.all([t.e("chunk-21bf94a0"),t.e("chunk-f01313a8")]).then(t.bind(null,"43a0"))}}]},{path:"/user/other/follow/:id",name:"user-other-follow",component:function(){return Promise.all([t.e("chunk-69c5ce55"),t.e("chunk-734a2e63")]).then(t.bind(null,"d7ac"))},redirect:"/user/other/follow/follower",children:[{path:"follower",name:"user-other-follow-follower",component:function(){return t.e("chunk-ee1ca550").then(t.bind(null,"0b9f"))}},{path:"following",name:"user-other-follow-following",component:function(){return t.e("chunk-9e2e1f4a").then(t.bind(null,"e6cd"))}}]},{path:"/chat_public",name:"chat-room",component:function(){return Promise.all([t.e("chunk-69c5ce55"),t.e("chunk-21bf94a0"),t.e("chunk-59ce69da")]).then(t.bind(null,"bf48"))}},{path:"/chat_private",name:"chat-room-private",component:function(){return Promise.all([t.e("chunk-69c5ce55"),t.e("chunk-21bf94a0"),t.e("chunk-64995860")]).then(t.bind(null,"e19b"))}},{path:"/notify",name:"notify",component:function(){return Promise.all([t.e("chunk-69c5ce55"),t.e("chunk-ce5415ac")]).then(t.bind(null,"b9da"))}},{path:"/admin",name:"admin-login",component:function(){return t.e("chunk-5b5b328e").then(t.bind(null,"23b1"))}},{path:"/admin_main",name:"admin-main",component:function(){return t.e("chunk-5da51db0").then(t.bind(null,"4c90"))}},{path:"/admin_users",name:"admin-users",component:function(){return t.e("chunk-1d714e5b").then(t.bind(null,"6135"))}},{path:"*",name:"not-found",component:function(){return t.e("chunk-77f137cc").then(t.bind(null,"9703"))}}],S=new y["a"]({routes:A,linkExactActiveClass:"active"});S.beforeEach(function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(n,t,r){var c,a,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(c=localStorage.getItem("token"),a=!1,!c){e.next=6;break}return e.next=5,l.dispatch("fetchCurrentUser");case 5:a=e.sent;case 6:if(o=["user-login","register","admin-login"],a||o.includes(n.name)){e.next=10;break}return r("/login"),e.abrupt("return");case 10:if(!a||!o.includes(n.name)){e.next=13;break}return r("/main"),e.abrupt("return");case 13:r();case 14:case"end":return e.stop()}}),e)})));return function(n,t,r){return e.apply(this,arguments)}}());var j=S;r["a"].config.productionTip=!1,new r["a"]({router:j,store:l,render:function(e){return e(w)}}).$mount("#app")},"5c0b":function(e,n,t){"use strict";t("9c0c")},"841f":function(e,n,t){"use strict";t("3b8e")},"9c0c":function(e,n,t){},c968:function(e,n,t){"use strict";t.d(n,"c",(function(){return i})),t.d(n,"a",(function(){return s})),t.d(n,"b",(function(){return l}));t("d3b7");var r=t("bc3a"),c=t.n(r),a=t("3d20"),o=t.n(a),u=c.a.create({baseURL:"https://super-simple-twitter.herokuapp.com/api"});u.interceptors.request.use((function(e){var n=localStorage.getItem("token");return n&&(e.headers["Authorization"]="Bearer ".concat(n)),e}),(function(e){return Promise.reject(e)}));var i=u,s=o.a.mixin({position:"center",showConfirmButton:!1,timer:1500}),l=o.a.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3})}});
//# sourceMappingURL=app.b23c94de.js.map