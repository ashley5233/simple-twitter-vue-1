(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1deeca10"],{"031e":function(t,e,s){"use strict";s("fb7c")},1079:function(t,e,s){"use strict";s("15ce")},"15ce":function(t,e,s){},2375:function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},r=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"spinner"},[s("div",{staticClass:"bouncing-loader"},[s("div"),s("div"),s("div")])])}],i=(s("4010"),s("2877")),n={},c=Object(i["a"])(n,a,r,!1,null,"da50595c",null);e["a"]=c.exports},4010:function(t,e,s){"use strict";s("8227")},"56c3":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"rwd-container"},[s("div",{staticClass:"relpy-list-container"},[s("div",{staticClass:"navbar"},[s("Navbar")],1),s("div",{staticClass:"user-tweet scrollbar"},[s("UserTweet")],1),s("div",{staticClass:"related-users"},[s("RelatedUsers")],1)])])},r=[],i=s("d178"),n=s("61f2"),c=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"rwd-container"},[s("div",{staticClass:"container"},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.isShowModal,expression:"isShowModal"}],staticClass:"cover",on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.closeModal.apply(null,arguments)}}}),s("header",[s("div",{staticClass:"goback-btn",on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.goback.apply(null,arguments)}}},[s("svg",{attrs:{width:"17",height:"14",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[s("path",{attrs:{d:"M16 6H3.414l4.293-4.293A1 1 0 006.293.293l-6 6a1 1 0 000 1.414l6 6a.996.996 0 001.414 0 1 1 0 000-1.414L3.414 8H16a1 1 0 100-2z",fill:"#000"}})])]),s("div",{staticClass:"header-content"},[t._v("推文")])]),t.isLoading?s("Spinner"):s("div",{staticClass:"tweet"},[s("div",{staticClass:"author-info"},[s("div",{staticClass:"avatar author-info-link",on:{click:function(e){return t.redirectToProfile(t.tweet.User.id)}}},[s("img",{staticClass:"avatar-img",attrs:{src:t.tweet.User.avatar,alt:""}})]),s("div",{staticClass:"name-info"},[s("div",{staticClass:"name"},[t._v(t._s(t.tweet.User.name))]),s("div",{staticClass:"account"},[t._v(t._s(t.tweet.User.account))])])]),s("div",{staticClass:"tweet-content"},[t._v(t._s(t.tweet.description))]),s("div",{staticClass:"time"},[t._v(t._s(t._f("fromNow")(t.tweet.createdAt)))]),s("div",{staticClass:"reply-info"},[t._v(" "+t._s(t.tweet.Replies.length)+" 回覆  "+t._s(t.tweet.LikesCount)+" 喜歡次數 ")])]),s("div",{staticClass:"function-btn"},[s("div",{staticClass:"reply-btn",on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.showModal.apply(null,arguments)}}},[s("svg",{staticClass:"reply-icon",attrs:{width:"26",height:"26",viewBox:"0 0 13 13",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[s("path",{staticClass:"reply-icon",attrs:{d:"M7.77881 0.40127L5.18631 0.39502H5.18506C2.45131 0.39502 0.310059 2.53689 0.310059 5.27127C0.310059 7.83252 2.30131 9.77502 4.97568 9.87752V12.27C4.97568 12.3375 5.00318 12.4488 5.05068 12.5219C5.13943 12.6625 5.29068 12.7388 5.44568 12.7388C5.53193 12.7388 5.61881 12.715 5.69693 12.665C5.86193 12.56 9.74256 10.0775 10.7519 9.22377C11.9407 8.21752 12.6519 6.74252 12.6538 5.27877V5.26814C12.6501 2.53877 10.5101 0.401269 7.77881 0.400644V0.40127ZM10.1457 8.50877C9.43693 9.10877 7.10693 10.6369 5.91318 11.4106V9.41877C5.91318 9.16002 5.70381 8.95002 5.44443 8.95002H5.19693C2.90943 8.95002 1.24818 7.40252 1.24818 5.27127C1.24818 3.06252 2.97818 1.33252 5.18568 1.33252L7.77756 1.33877H7.77881C9.98631 1.33877 11.7163 3.06752 11.7176 5.27377C11.7157 6.46752 11.1288 7.67627 10.1463 8.50877H10.1457Z",fill:"#657786"}})])]),t.tweet.isLike?t._e():s("div",{staticClass:"like-btn",on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.like.apply(null,arguments)}}},[s("svg",{staticClass:"unlike-icon",attrs:{width:"26",height:"26",viewBox:"0 0 13 13",fill:"transparent",xmlns:"http://www.w3.org/2000/svg"}},[s("path",{staticClass:"unlike-icon",attrs:{d:"M6.5 12.5239H6.49125C4.87687 12.4939 0.21875 8.28514 0.21875 4.29889C0.21875 2.38389 1.79687 0.702637 3.59562 0.702637C5.02687 0.702637 5.98937 1.69014 6.49937 2.40889C7.00812 1.69139 7.97062 0.702637 9.4025 0.702637C11.2025 0.702637 12.78 2.38389 12.78 4.29951C12.78 8.28451 8.12125 12.4933 6.50687 12.5226H6.5V12.5239ZM3.59625 1.64076C2.29625 1.64076 1.15687 2.88326 1.15687 4.30014C1.15687 7.88764 5.55312 11.5476 6.50062 11.5864C7.44937 11.5476 11.8444 7.88826 11.8444 4.30014C11.8444 2.88326 10.705 1.64076 9.405 1.64076C7.825 1.64076 6.9425 3.47576 6.935 3.49389C6.79125 3.84514 6.2125 3.84514 6.06812 3.49389C6.05937 3.47514 5.1775 1.64076 3.59687 1.64076H3.59625Z",fill:"#657786"}})])]),t.tweet.isLike?s("div",{staticClass:"like-btn",on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.unlike.apply(null,arguments)}}},[s("img",{staticClass:"heart-icon",attrs:{src:"heartRed.svg",alt:""}})]):t._e()]),t._l(t.tweet.Replies,(function(e){return s("div",{key:e.id,staticClass:"tweet-reply"},[s("div",{staticClass:"reply-avatar",on:{click:function(s){return t.redirectToProfile(e.User.id)}}},[s("img",{staticClass:"avatar-img",attrs:{src:e.User.avatar,alt:""}})]),s("div",{staticClass:"reply-info"},[s("div",{staticClass:"reply-user"},[s("h3",{staticClass:"reply-user-name",on:{click:function(s){return t.redirectToProfile(e.User.id)}}},[t._v(t._s(e.User.name))]),s("h3",{staticClass:"reply-user-account",on:{click:function(s){return t.redirectToProfile(e.User.id)}}},[t._v(t._s(e.User.account)+"．")]),t._v(" "+t._s(t._f("fromNow")(e.createdAt))+" ")]),s("div",{staticClass:"tweet-author"},[s("h3",{staticClass:"reply-text"},[t._v("回覆")]),s("router-link",{attrs:{to:""}},[s("h3",{staticClass:"author-name"},[t._v(t._s(t.tweet.User.name))])])],1),s("div",{staticClass:"reply-content"},[t._v(t._s(e.comment))])])])})),t.isShowModal?s("div",{staticClass:"reply-modal"},[s("div",{staticClass:"modal-container"},[s("div",{staticClass:"modal-header"},[s("div",{staticClass:"close-btn",on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.closeModal.apply(null,arguments)}}},[s("img",{attrs:{src:"cross.svg",alt:""}})])]),s("div",{staticClass:"replied-tweet"},[s("div",{staticClass:"reply-avatar"},[s("img",{staticClass:"avatar-img",attrs:{src:t.tweet.User.avatar,alt:""}}),s("div",{staticClass:"line"})]),s("div",{staticClass:"replied-content"},[s("div",{staticClass:"reply-user-info"},[s("div",{staticClass:"reply-user"},[s("h3",{staticClass:"reply-user-name"},[t._v(t._s(t.tweet.User.name))]),s("h3",{staticClass:"reply-user-account"},[t._v(t._s(t.tweet.User.account)+"．")]),t._v(" "+t._s(t._f("fromNow")(t.tweet.createdAt))+" ")]),s("div",{staticClass:"tweet-content"},[s("h3",{staticClass:"content"},[t._v(" "+t._s(t.tweet.description)+" ")])])]),s("div",{staticClass:"replied-author"},[s("h3",{staticClass:"reply-text"},[t._v("回覆給 ")]),s("h3",{staticClass:"replid-author-name"},[t._v(t._s(t.tweet.User.account))])])])]),s("div",{staticClass:"modal-content"},[s("div",{staticClass:"avatar"},[s("img",{staticClass:"avatar-img",attrs:{src:t.currentUser.avatar,alt:""}})]),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.comment,expression:"comment"}],staticClass:"twitter-text",attrs:{placeholder:"推你的回覆",maxlength:"200"},domProps:{value:t.comment},on:{input:function(e){e.target.composing||(t.comment=e.target.value)}}})]),s("button",{staticClass:"main-btn post-btn",on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.replyTweet.apply(null,arguments)}}},[t._v(" 回覆 ")])])]):t._e()],2)])},o=[],l=s("5530"),u=s("1da1"),d=(s("96cf"),s("a4d3"),s("e01a"),s("498a"),s("2375")),v=s("7482"),p=s("c968"),w=s("2f62"),f=s("2708"),h={name:"UserTweet",components:{Spinner:d["a"]},mixins:[f["a"]],data:function(){return{tweet:{id:-1,description:"",createdAt:"",LikesCount:-1,isLike:"",User:{id:-1,name:"",avatar:"",account:""},Replies:[{id:-1,comment:"",createdAt:"",User:{id:-1,name:"",cover:"",account:""}}]},isShowModal:!1,comment:"",isLoading:!0}},methods:{showModal:function(){this.isShowModal=!0},closeModal:function(){this.isShowModal=!1},fetchTweet:function(t){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function s(){var a,r,i,n,c,o,u,d,w;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.prev=0,s.next=3,v["a"].getSingleTweet({tweet_id:t});case 3:a=s.sent,r=a.data,i=r.id,n=r.description,c=r.createdAt,o=r.LikesCount,u=r.isLike,d=r.User,w=r.Replies,e.tweet=Object(l["a"])(Object(l["a"])({},e.tweet),{},{id:i,description:n,createdAt:c,LikesCount:o,isLike:u,User:d,Replies:w}),e.isLoading=!1,s.next=15;break;case 10:s.prev=10,s.t0=s["catch"](0),console.log(s.t0),p["a"].fire({icon:"warning",title:"無法取得貼文，請稍後再試"}),e.isLoading=!1;case 15:case"end":return s.stop()}}),s,null,[[0,10]])})))()},replyTweet:function(){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function e(){var s,a,r,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.comment.trim()){e.next=5;break}return p["b"].fire({icon:"warning",title:"尚未輸入內容"}),e.abrupt("return");case 5:if(!(t.comment.length>140)){e.next=8;break}return p["b"].fire({icon:"warning",title:"內容超過字數限制！"}),e.abrupt("return");case 8:return e.prev=8,s=t.$route.params.id,a=t.comment,e.next=13,v["a"].replySingleTweet({tweet_id:s,comment:a});case 13:if(r=e.sent,i=r.data,t.comment="",t.isShowModal=!1,t.fetchTweet(t.tweet.id),"success"===i.status){e.next=20;break}throw new Error(i.message);case 20:e.next=26;break;case 22:e.prev=22,e.t0=e["catch"](8),console.log(e.t0),p["a"].fire({icon:"warning",title:"無法回覆，請稍後再試"});case 26:case"end":return e.stop()}}),e,null,[[8,22]])})))()},like:function(){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function e(){var s,a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,s=t.tweet.id,e.next=4,v["a"].likeSingleTweet({TweetId:s});case 4:if(a=e.sent,r=a.data,t.tweet.isLike=!0,t.tweet.LikesCount+=1,"success"===r.status){e.next=10;break}throw new Error(r.message);case 10:e.next=16;break;case 12:e.prev=12,e.t0=e["catch"](0),console.log(e.t0),p["a"].fire({icon:"warning",title:"無法喜歡推文，請稍後再試"});case 16:case"end":return e.stop()}}),e,null,[[0,12]])})))()},unlike:function(){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function e(){var s,a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,s=t.tweet.id,e.next=4,v["a"].unlikeSingleTweet({TweetId:s});case 4:if(a=e.sent,r=a.data,t.tweet.isLike=!1,t.tweet.LikesCount-=1,console.log(r.status),"success"===r.status){e.next=11;break}throw new Error(r.message);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e["catch"](0),console.log(e.t0),p["a"].fire({icon:"warning",title:"無法取消喜歡，請稍後再試"});case 17:case"end":return e.stop()}}),e,null,[[0,13]])})))()},redirectToProfile:function(t){t===this.currentUser.id?this.$router.push("/user/self"):(this.$router.push({path:"/user/other/".concat(t,"/tweet")}),this.$emit("updateUser",t))},goback:function(){this.$router.go(-1)}},computed:Object(l["a"])({},Object(w["b"])(["currentUser"])),created:function(){var t=this.$route.params.id;this.fetchTweet(t)}},m=h,C=(s("1079"),s("2877")),g=Object(C["a"])(m,c,o,!1,null,"15f76a4a",null),b=g.exports,k={name:"ReplyList",components:{Navbar:i["a"],RelatedUsers:n["a"],UserTweet:b},data:function(){return{}}},_=k,x=(s("833e"),Object(C["a"])(_,a,r,!1,null,"fd191d20",null));e["default"]=x.exports},"61f2":function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container"},[s("input",{staticClass:"navbar-toggle",attrs:{type:"checkbox",id:"navbar-toggle"}}),t.isLoading?s("Spinner"):s("div",{staticClass:"related-users-card"},[s("div",{staticClass:"header"},[t._v("跟隨誰")]),t._l(t.relatedUsers,(function(e){return s("div",{key:e.id,staticClass:"single-user",on:{click:function(s){return t.redirectToProfile(e.id)}}},[s("div",{staticClass:"avatar"},[s("img",{staticClass:"avatar-img",attrs:{src:e.avatar,alt:""}})]),s("div",{staticClass:"info"},[s("div",{staticClass:"name"},[t._v(t._s(e.name))]),s("div",{staticClass:"account"},[t._v(t._s(e.account))])]),e.isFollowed?s("button",{staticClass:"main-btn following-btn",on:{click:function(s){return s.stopPropagation(),s.preventDefault(),t.unFollow(e.id)}}},[t._v(" 正在跟隨 ")]):s("button",{staticClass:"follow-btn",on:{click:function(s){return s.stopPropagation(),s.preventDefault(),t.follow(e.id)}}},[t._v(" 跟隨 ")])])}))],2),s("div",{staticClass:"footer"},[t.isShowMore?s("label",{staticClass:"navbar-toggle-label",attrs:{for:"navbar-toggle"},on:{click:t.showLess}},[s("div",{staticClass:"show-less-btn"},[t._v("顯示較少")])]):s("label",{staticClass:"navbar-toggle-label",attrs:{for:"navbar-toggle"},on:{click:t.showMore}},[s("div",{staticClass:"show-more-btn"},[t._v("顯示更多")])])])],1)},r=[],i=s("1da1"),n=s("5530"),c=(s("96cf"),s("d81d"),s("2375")),o=s("1602"),l=s("c968"),u=s("2f62"),d={name:"RelatedUsers",components:{Spinner:c["a"]},props:{isFollowStatus:{type:Object}},data:function(){return{relatedUsers:[],isShowMore:!1,isLoading:!0}},watch:{isFollowStatus:function(t){this.relatedUsers=this.relatedUsers.map((function(e){return e.id===t.id?Object(n["a"])(Object(n["a"])({},e),{},{isFollowed:t.isFollowed}):e})),this.$emit("tap-follow-button",{id:t.id,isFollowed:t.isFollowed})}},methods:{showMore:function(){this.isShowMore=!0},showLess:function(){this.isShowMore=!1},follow:function(t){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function s(){var a,r;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.prev=0,s.next=3,o["a"].follow({id:t});case 3:if(a=s.sent,r=a.data,"success"===r.status){s.next=7;break}throw new Error(r.message);case 7:e.relatedUsers=e.relatedUsers.map((function(e){return e.id===t?Object(n["a"])(Object(n["a"])({},e),{},{isFollowed:!0}):e})),e.$emit("related-to-userFollow",{id:t,isFollowed:!0}),s.next=14;break;case 11:s.prev=11,s.t0=s["catch"](0),l["a"].fire({icon:"warning",title:"無法追蹤，請稍後再試"});case 14:case"end":return s.stop()}}),s,null,[[0,11]])})))()},unFollow:function(t){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function s(){var a,r;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.prev=0,s.next=3,o["a"].unFollow({userId:t});case 3:if(a=s.sent,r=a.data,"success"===r.status){s.next=7;break}throw new Error(r.message);case 7:e.relatedUsers=e.relatedUsers.map((function(e){return e.id===t?Object(n["a"])(Object(n["a"])({},e),{},{isFollowed:!1}):e})),e.$emit("related-to-userFollow",{id:t,isFollowed:!1}),s.next=14;break;case 11:s.prev=11,s.t0=s["catch"](0),l["a"].fire({icon:"warning",title:"無法取消追蹤，請稍後再試"});case 14:case"end":return s.stop()}}),s,null,[[0,11]])})))()},fetchTopUsers:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var s,a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o["a"].getTopUsers();case 3:s=e.sent,a=s.data,r=a.topUsers,t.relatedUsers=r,t.isLoading=!1,e.next=15;break;case 10:e.prev=10,e.t0=e["catch"](0),console.log(e.t0),l["a"].fire({icon:"warning",title:"無法取得使用者資料，請稍後再試"}),t.isLoading=!1;case 15:case"end":return e.stop()}}),e,null,[[0,10]])})))()},redirectToProfile:function(t){t===this.currentUser.id?this.$router.push("/user/self"):(this.$router.push({path:"/user/other/".concat(t,"/tweet")}),this.$emit("updateUser",t))}},computed:Object(n["a"])({},Object(u["b"])(["currentUser"])),created:function(){this.fetchTopUsers()}},v=d,p=(s("031e"),s("2877")),w=Object(p["a"])(v,a,r,!1,null,"bd73e1d8",null);e["a"]=w.exports},8227:function(t,e,s){},"833e":function(t,e,s){"use strict";s("e53c")},d81d:function(t,e,s){"use strict";var a=s("23e7"),r=s("b727").map,i=s("1dde"),n=i("map");a({target:"Array",proto:!0,forced:!n},{map:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}})},e53c:function(t,e,s){},fb7c:function(t,e,s){}}]);
//# sourceMappingURL=chunk-1deeca10.54cf9bbf.js.map