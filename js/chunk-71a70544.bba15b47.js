(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-71a70544"],{"031e":function(e,t,r){"use strict";r("fb7c")},"10ea":function(e,t,r){"use strict";r.r(t);var s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"rwd-container"},[r("div",{staticClass:"main-container"},[r("div",{staticClass:"navbar"},[r("Navbar",{on:{updateTweets:e.updateTweets}})],1),r("div",{staticClass:"main-page scrollbar"},[r("div",{staticClass:"create-tweet"},[r("CreateComment",{attrs:{currentUser:e.currentUser},on:{updateTweets:e.updateTweets}})],1),r("div",{staticClass:"tweets"},[r("UserTweets",{attrs:{Switch:e.Switch}})],1)]),r("div",{staticClass:"related-users"},[r("RelatedUsers")],1)])])},a=[],n=r("5530"),i=r("1da1"),c=(r("96cf"),r("d178")),o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"container"},[r("div",{staticClass:"wrapper"},[e._m(0),r("div",{staticClass:"create-tweet"},[r("div",{staticClass:"user-avatar"},[r("img",{attrs:{src:e.currentUser.avatar,alt:"avatar"}})]),r("div",{staticClass:"created"},[r("div",{staticClass:"user-text"},[r("textarea",{directives:[{name:"model",rawName:"v-model",value:e.description,expression:"description"}],attrs:{name:"",id:"",cols:"30",rows:"10",maxlength:"200",placeholder:"有什麼新鮮事?"},domProps:{value:e.description},on:{input:function(t){t.target.composing||(e.description=t.target.value)}}}),r("emoji-picker",{on:{emoji:e.append},scopedSlots:e._u([{key:"emoji-invoker",fn:function(e){var t=e.events.click;return r("div",{staticClass:"emoji-invoker",on:{click:function(e){return e.stopPropagation(),t.apply(null,arguments)}}},[r("svg",{attrs:{height:"24",viewBox:"0 0 24 24",width:"24",xmlns:"http://www.w3.org/2000/svg"}},[r("path",{attrs:{d:"M0 0h24v24H0z",fill:"none"}}),r("path",{attrs:{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm3.5-9c.83 0 1.5-.67 1.5-1.5S16.33 8 15.5 8 14 8.67 14 9.5s.67 1.5 1.5 1.5zm-7 0c.83 0 1.5-.67 1.5-1.5S9.33 8 8.5 8 7 8.67 7 9.5 7.67 11 8.5 11zm3.5 6.5c2.33 0 4.31-1.46 5.11-3.5H6.89c.8 2.04 2.78 3.5 5.11 3.5z"}})])])}},{key:"emoji-picker",fn:function(t){var s=t.emojis,a=t.insert,n=t.display;return r("div",{staticClass:"emoji-picker"},[r("div",{staticClass:"emoji-picker-wrapper",style:{top:n.y+"px",left:n.x+"px"}},[r("div",e._l(s,(function(t,s){return r("div",{key:s},[r("h5",[e._v(e._s(s))]),r("div",{staticClass:"emojis"},e._l(t,(function(t,s){return r("span",{key:s,attrs:{title:s},on:{click:function(e){return a(t)}}},[e._v(e._s(t))])})),0)])})),0)])])}}])})],1),r("div",{staticClass:"btn-place"},[r("router-link",{attrs:{to:"#"}},[r("button",{staticClass:"create-btn",class:{"disabled-btn":e.isProcessing},attrs:{disabled:e.isProcessing},on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.createTweet.apply(null,arguments)}}},[e._v(" 推文 ")])])],1)])])])])},l=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"user-header"},[r("span",[e._v("首頁")])])}],u=(r("498a"),r("a4d3"),r("e01a"),r("c968")),d=r("7482"),p=r("669f"),f=r.n(p),v={name:"CreateComment",props:{currentUser:{type:Object,required:!0}},components:{EmojiPicker:f.a},data:function(){return{description:"",isProcessing:!1,User:{}}},mounted:function(){this.fetchUser()},directives:{focus:{inserted:function(e){e.focus()}}},methods:{fetchUser:function(){this.User=this.currentUser},createTweet:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.description.trim()){t.next=5;break}return u["b"].fire({icon:"warning",title:"尚未輸入內容"}),t.abrupt("return");case 5:if(!(e.description.length>140)){t.next=8;break}return u["b"].fire({icon:"warning",title:"內容超過字數限制！"}),t.abrupt("return");case 8:if(t.prev=8,e.isProcessing=!0,e.description.length&&e.description.trim()){t.next=14;break}return u["a"].fire({icon:"info",title:"請輸入推文..."}),e.isProcessing=!1,t.abrupt("return");case 14:return t.next=16,d["a"].createTweet({description:e.description});case 16:if(r=t.sent,s=r.data,"error"!==s.status){t.next=20;break}throw new Error(s.message);case 20:e.description="",e.isProcessing=!1,e.$emit("updateTweets"),t.next=29;break;case 25:t.prev=25,t.t0=t["catch"](8),e.isProcessing=!1,u["a"].fire({icon:"warning",title:"無法新增推文，請稍後再試"});case 29:case"end":return t.stop()}}),t,null,[[8,25]])})))()},append:function(e){this.description+=e}}},w=v,h=(r("3a79"),r("2877")),m=Object(h["a"])(w,o,l,!1,null,"54681dcc",null),b=m.exports,g=r("8f8e"),C=r("61f2"),k=r("2f62"),x={name:"UserMainPage",components:{Navbar:c["a"],CreateComment:b,UserTweets:g["default"],RelatedUsers:C["a"]},data:function(){return{tweets:[],Switch:!1}},created:function(){this.fetchTweets()},methods:{fetchTweets:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,d["a"].getTweets();case 3:r=t.sent,s=r.data,e.tweets=s,t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),u["a"].fire({icon:"warning",title:"無法取得資料，請稍後再試"});case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))()},updateTweets:function(){this.Switch=!this.Switch}},computed:Object(n["a"])({},Object(k["b"])(["currentUser"]))},U=x,j=(r("3ea2"),Object(h["a"])(U,s,a,!1,null,"eaf4b3a4",null));t["default"]=j.exports},"3a79":function(e,t,r){"use strict";r("f932")},"3c33":function(e,t,r){},"3ea2":function(e,t,r){"use strict";r("3c33")},"61f2":function(e,t,r){"use strict";var s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"container"},[r("input",{staticClass:"navbar-toggle",attrs:{type:"checkbox",id:"navbar-toggle"}}),e.isLoading?r("Spinner"):r("div",{staticClass:"related-users-card"},[r("div",{staticClass:"header"},[e._v("跟隨誰")]),e._l(e.relatedUsers,(function(t){return r("div",{key:t.id,staticClass:"single-user",on:{click:function(r){return e.redirectToProfile(t.id)}}},[r("div",{staticClass:"avatar"},[r("img",{staticClass:"avatar-img",attrs:{src:t.avatar,alt:""}})]),r("div",{staticClass:"info"},[r("div",{staticClass:"name"},[e._v(e._s(t.name))]),r("div",{staticClass:"account"},[e._v(e._s(t.account))])]),t.isFollowed?r("button",{staticClass:"main-btn following-btn",on:{click:function(r){return r.stopPropagation(),r.preventDefault(),e.unFollow(t.id)}}},[e._v(" 正在跟隨 ")]):r("button",{staticClass:"follow-btn",on:{click:function(r){return r.stopPropagation(),r.preventDefault(),e.follow(t.id)}}},[e._v(" 跟隨 ")])])}))],2),r("div",{staticClass:"footer"},[e.isShowMore?r("label",{staticClass:"navbar-toggle-label",attrs:{for:"navbar-toggle"},on:{click:e.showLess}},[r("div",{staticClass:"show-less-btn"},[e._v("顯示較少")])]):r("label",{staticClass:"navbar-toggle-label",attrs:{for:"navbar-toggle"},on:{click:e.showMore}},[r("div",{staticClass:"show-more-btn"},[e._v("顯示更多")])])])],1)},a=[],n=r("1da1"),i=r("5530"),c=(r("96cf"),r("d81d"),r("2375")),o=r("1602"),l=r("c968"),u=r("2f62"),d={name:"RelatedUsers",components:{Spinner:c["a"]},props:{isFollowStatus:{type:Object}},data:function(){return{relatedUsers:[],isShowMore:!1,isLoading:!0}},watch:{isFollowStatus:function(e){this.relatedUsers=this.relatedUsers.map((function(t){return t.id===e.id?Object(i["a"])(Object(i["a"])({},t),{},{isFollowed:e.isFollowed}):t})),this.$emit("tap-follow-button",{id:e.id,isFollowed:e.isFollowed})}},methods:{showMore:function(){this.isShowMore=!0},showLess:function(){this.isShowMore=!1},follow:function(e){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function r(){var s,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,o["a"].follow({id:e});case 3:if(s=r.sent,a=s.data,"success"===a.status){r.next=7;break}throw new Error(a.message);case 7:t.relatedUsers=t.relatedUsers.map((function(t){return t.id===e?Object(i["a"])(Object(i["a"])({},t),{},{isFollowed:!0}):t})),t.$emit("related-to-userFollow",{id:e,isFollowed:!0}),r.next=14;break;case 11:r.prev=11,r.t0=r["catch"](0),l["a"].fire({icon:"warning",title:"無法追蹤，請稍後再試"});case 14:case"end":return r.stop()}}),r,null,[[0,11]])})))()},unFollow:function(e){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function r(){var s,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,o["a"].unFollow({userId:e});case 3:if(s=r.sent,a=s.data,"success"===a.status){r.next=7;break}throw new Error(a.message);case 7:t.relatedUsers=t.relatedUsers.map((function(t){return t.id===e?Object(i["a"])(Object(i["a"])({},t),{},{isFollowed:!1}):t})),t.$emit("related-to-userFollow",{id:e,isFollowed:!1}),r.next=14;break;case 11:r.prev=11,r.t0=r["catch"](0),l["a"].fire({icon:"warning",title:"無法取消追蹤，請稍後再試"});case 14:case"end":return r.stop()}}),r,null,[[0,11]])})))()},fetchTopUsers:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var r,s,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,o["a"].getTopUsers();case 3:r=t.sent,s=r.data,a=s.topUsers,e.relatedUsers=a,e.isLoading=!1,t.next=15;break;case 10:t.prev=10,t.t0=t["catch"](0),console.log(t.t0),l["a"].fire({icon:"warning",title:"無法取得使用者資料，請稍後再試"}),e.isLoading=!1;case 15:case"end":return t.stop()}}),t,null,[[0,10]])})))()},redirectToProfile:function(e){e===this.currentUser.id?this.$router.push("/user/self"):(this.$router.push({path:"/user/other/".concat(e,"/tweet")}),this.$emit("updateUser",e))}},computed:Object(i["a"])({},Object(u["b"])(["currentUser"])),created:function(){this.fetchTopUsers()}},p=d,f=(r("031e"),r("2877")),v=Object(f["a"])(p,s,a,!1,null,"bd73e1d8",null);t["a"]=v.exports},d81d:function(e,t,r){"use strict";var s=r("23e7"),a=r("b727").map,n=r("1dde"),i=n("map");s({target:"Array",proto:!0,forced:!i},{map:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}})},f932:function(e,t,r){},fb7c:function(e,t,r){}}]);
//# sourceMappingURL=chunk-71a70544.bba15b47.js.map