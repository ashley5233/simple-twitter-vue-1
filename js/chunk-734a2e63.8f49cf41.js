(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-734a2e63"],{"031e":function(t,e,s){"use strict";s("fb7c")},1516:function(t,e,s){"use strict";s("204a")},"204a":function(t,e,s){},2375:function(t,e,s){"use strict";var r=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},a=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"spinner"},[s("div",{staticClass:"bouncing-loader"},[s("div"),s("div"),s("div")])])}],n=(s("4010"),s("2877")),o={},i=Object(n["a"])(o,r,a,!1,null,"da50595c",null);e["a"]=i.exports},4010:function(t,e,s){"use strict";s("8227")},"61f2":function(t,e,s){"use strict";var r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container"},[s("input",{staticClass:"navbar-toggle",attrs:{type:"checkbox",id:"navbar-toggle"}}),t.isLoading?s("Spinner"):s("div",{staticClass:"related-users-card"},[s("div",{staticClass:"header"},[t._v("跟隨誰")]),t._l(t.relatedUsers,(function(e){return s("div",{key:e.id,staticClass:"single-user",on:{click:function(s){return t.redirectToProfile(e.id)}}},[s("div",{staticClass:"avatar"},[s("img",{staticClass:"avatar-img",attrs:{src:e.avatar,alt:""}})]),s("div",{staticClass:"info"},[s("div",{staticClass:"name"},[t._v(t._s(e.name))]),s("div",{staticClass:"account"},[t._v(t._s(e.account))])]),e.isFollowed?s("button",{staticClass:"main-btn following-btn",on:{click:function(s){return s.stopPropagation(),s.preventDefault(),t.unFollow(e.id)}}},[t._v(" 正在跟隨 ")]):s("button",{staticClass:"follow-btn",on:{click:function(s){return s.stopPropagation(),s.preventDefault(),t.follow(e.id)}}},[t._v(" 跟隨 ")])])}))],2),s("div",{staticClass:"footer"},[t.isShowMore?s("label",{staticClass:"navbar-toggle-label",attrs:{for:"navbar-toggle"},on:{click:t.showLess}},[s("div",{staticClass:"show-less-btn"},[t._v("顯示較少")])]):s("label",{staticClass:"navbar-toggle-label",attrs:{for:"navbar-toggle"},on:{click:t.showMore}},[s("div",{staticClass:"show-more-btn"},[t._v("顯示更多")])])])],1)},a=[],n=s("1da1"),o=s("5530"),i=(s("96cf"),s("d81d"),s("2375")),l=s("1602"),c=s("c968"),u=s("2f62"),d={name:"RelatedUsers",components:{Spinner:i["a"]},props:{isFollowStatus:{type:Object}},data:function(){return{relatedUsers:[],isShowMore:!1,isLoading:!0}},watch:{isFollowStatus:function(t){this.relatedUsers=this.relatedUsers.map((function(e){return e.id===t.id?Object(o["a"])(Object(o["a"])({},e),{},{isFollowed:t.isFollowed}):e})),this.$emit("tap-follow-button",{id:t.id,isFollowed:t.isFollowed})}},methods:{showMore:function(){this.isShowMore=!0},showLess:function(){this.isShowMore=!1},follow:function(t){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function s(){var r,a;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.prev=0,s.next=3,l["a"].follow({id:t});case 3:if(r=s.sent,a=r.data,"success"===a.status){s.next=7;break}throw new Error(a.message);case 7:e.relatedUsers=e.relatedUsers.map((function(e){return e.id===t?Object(o["a"])(Object(o["a"])({},e),{},{isFollowed:!0}):e})),e.$emit("related-to-userFollow",{id:t,isFollowed:!0}),s.next=14;break;case 11:s.prev=11,s.t0=s["catch"](0),c["a"].fire({icon:"warning",title:"無法追蹤，請稍後再試"});case 14:case"end":return s.stop()}}),s,null,[[0,11]])})))()},unFollow:function(t){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function s(){var r,a;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.prev=0,s.next=3,l["a"].unFollow({userId:t});case 3:if(r=s.sent,a=r.data,"success"===a.status){s.next=7;break}throw new Error(a.message);case 7:e.relatedUsers=e.relatedUsers.map((function(e){return e.id===t?Object(o["a"])(Object(o["a"])({},e),{},{isFollowed:!1}):e})),e.$emit("related-to-userFollow",{id:t,isFollowed:!1}),s.next=14;break;case 11:s.prev=11,s.t0=s["catch"](0),c["a"].fire({icon:"warning",title:"無法取消追蹤，請稍後再試"});case 14:case"end":return s.stop()}}),s,null,[[0,11]])})))()},fetchTopUsers:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){var s,r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l["a"].getTopUsers();case 3:s=e.sent,r=s.data,a=r.topUsers,t.relatedUsers=a,t.isLoading=!1,e.next=15;break;case 10:e.prev=10,e.t0=e["catch"](0),console.log(e.t0),c["a"].fire({icon:"warning",title:"無法取得使用者資料，請稍後再試"}),t.isLoading=!1;case 15:case"end":return e.stop()}}),e,null,[[0,10]])})))()},redirectToProfile:function(t){t===this.currentUser.id?this.$router.push("/user/self"):(this.$router.push({path:"/user/other/".concat(t,"/tweet")}),this.$emit("updateUser",t))}},computed:Object(o["a"])({},Object(u["b"])(["currentUser"])),created:function(){this.fetchTopUsers()}},f=d,w=(s("031e"),s("2877")),v=Object(w["a"])(f,r,a,!1,null,"bd73e1d8",null);e["a"]=v.exports},8227:function(t,e,s){},a208:function(t,e,s){"use strict";s("dcc4")},d7ac:function(t,e,s){"use strict";s.r(e);var r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"rwd-container"},[s("div",{staticClass:"follow-container"},[s("div",{staticClass:"navbar"},[s("Navbar")],1),s("div",{staticClass:"middle-container scrollbar"},[s("div",{staticClass:"follow-tabs"},[s("UserFollowTabs",{attrs:{currentUser:t.currentUser}})],1),s("router-view",{attrs:{relateToUser:t.relateToUser},on:{"tap-follow-button":t.tapFollowButton}})],1),s("div",{staticClass:"related-users"},[s("RelatedUsers",{attrs:{isFollowStatus:t.isFollowStatus},on:{"related-to-userFollow":t.relatedToUserFollow}})],1)])])},a=[],n=s("5530"),o=s("d178"),i=s("61f2"),l=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container"},[s("div",{staticClass:"user-navbar"},[s("div",{staticClass:"icon",on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.$router.go(-1)}}},[s("svg",{attrs:{width:"17",height:"14",viewBox:"0 0 17 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[s("path",{attrs:{d:"M16 5.99988H3.41399L7.70699 1.70687C8.09699 1.31687 8.09699 0.683875 7.70699 0.292875C7.31699 -0.0981249 6.68399 -0.0971249 6.29299 0.292875L0.292988 6.29288C-0.0970117 6.68288 -0.0970117 7.31588 0.292988 7.70687L6.29299 13.7069C6.48799 13.9019 6.74299 13.9999 6.99999 13.9999C7.25699 13.9999 7.51199 13.9019 7.70699 13.7069C8.09699 13.3169 8.09699 12.6839 7.70699 12.2929L3.41399 7.99988H16C16.553 7.99988 17 7.55288 17 6.99988C17 6.44688 16.553 5.99988 16 5.99988Z",fill:"black"}})])]),s("div",{staticClass:"user-navbar-info"},[s("div",{staticClass:"user-name"},[t._v(t._s(t.UserTitle.name))]),s("div",{staticClass:"user-tweets-length"},[t._v(t._s(t.UserTitle.tweetsCount)+" 推文")])])]),s("div",{staticClass:"nav-tabs"},[s("router-link",{attrs:{to:{name:"user-self-follow-follower",params:{id:this.$route.params.id}}}},[s("div",{staticClass:"follower"},[t._v("跟隨者")])]),s("router-link",{attrs:{to:{name:"user-self-follow-following",params:{id:this.$route.params.id}}}},[s("div",{staticClass:"following"},[t._v("正在跟隨")])])],1)])},c=[],u=s("1da1"),d=(s("96cf"),s("1602")),f={name:"UserFollowtabs",props:{currentUser:{type:Object,required:!0}},data:function(){return{User:{},UserTitle:{name:"",tweetCount:""}}},watch:{currentUser:function(t){this.User=Object(n["a"])(Object(n["a"])({},this.User),t)}},created:function(){var t=this.$route.params.id;console.log(t),this.fetchUser(t)},methods:{fetchUser:function(t){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function s(){var r,a,o;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.prev=0,s.next=3,d["a"].getUserFollowings({userId:t});case 3:return r=s.sent,a=r.data,s.next=7,d["a"].getOtherUser({userId:t});case 7:if(o=s.sent,!a.status&&"error"!==o.data.status){s.next=10;break}throw new Error(a.message);case 10:e.User=Object(n["a"])(Object(n["a"])({},e.User),e.currentUser),e.UserTitle=Object(n["a"])({},o.data),s.next=17;break;case 14:s.prev=14,s.t0=s["catch"](0),console.error(s.t0);case 17:case"end":return s.stop()}}),s,null,[[0,14]])})))()}}},w=f,v=(s("1516"),s("2877")),h=Object(v["a"])(w,l,c,!1,null,"266cce92",null),p=h.exports,b=s("2f62"),m={name:"UserSelfFollow",components:{Navbar:o["a"],UserFollowTabs:p,RelatedUsers:i["a"]},data:function(){return{isFollowStatus:{},relatedFollowStatus:{},relateToUser:{}}},watch:{relatedFollowStatus:function(t){this.relatedFollowStatus=t}},methods:{tapFollowButton:function(t){this.isFollowStatus=t},relatedToUserFollow:function(t){this.relateToUser=t}},computed:Object(n["a"])({},Object(b["b"])(["currentUser"]))},g=m,U=(s("a208"),Object(v["a"])(g,r,a,!1,null,"a7bc188a",null));e["default"]=U.exports},d81d:function(t,e,s){"use strict";var r=s("23e7"),a=s("b727").map,n=s("1dde"),o=n("map");r({target:"Array",proto:!0,forced:!o},{map:function(t){return a(this,t,arguments.length>1?arguments[1]:void 0)}})},dcc4:function(t,e,s){},fb7c:function(t,e,s){}}]);
//# sourceMappingURL=chunk-734a2e63.8f49cf41.js.map